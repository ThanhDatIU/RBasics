<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>12 Grouping and summarizing | Introduction to DataCamp</title>
<meta name="author" content="Tran Thanh Dat">
<meta name="generator" content="bookdown 0.24 with bs4_book()">
<meta property="og:title" content="12 Grouping and summarizing | Introduction to DataCamp">
<meta property="og:type" content="book">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="12 Grouping and summarizing | Introduction to DataCamp">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/header-attrs-2.12.1/header-attrs.js"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.3.1.9000/transition.js"></script><script src="libs/bs3compat-0.3.1.9000/tabs.js"></script><script src="libs/bs3compat-0.3.1.9000/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-115082821-1"></script><script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-115082821-1');
    </script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><meta name="description" content="So far you’ve been answering questions about individual country-year pairs, but you may be interested in aggregations of the data, such as the average life expectancy of all countries within each...">
<meta property="og:description" content="So far you’ve been answering questions about individual country-year pairs, but you may be interested in aggregations of the data, such as the average life expectancy of all countries within each...">
<meta name="twitter:description" content="So far you’ve been answering questions about individual country-year pairs, but you may be interested in aggregations of the data, such as the average life expectancy of all countries within each...">
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">Introduction to DataCamp</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html">Welcome to DataCamp</a></li>
<li class="book-part">R Fundamentals</li>
<li><a class="" href="data-wrangling.html"><span class="header-section-number">1</span> Data wrangling</a></li>
<li><a class="" href="data-visualization.html"><span class="header-section-number">2</span> Data visualization</a></li>
<li><a class="" href="grouping-and-summarizing.html"><span class="header-section-number">3</span> Grouping and summarizing</a></li>
<li><a class="" href="types-of-visualizations.html"><span class="header-section-number">4</span> Types of visualizations</a></li>
<li><a class="" href="conditionals-and-control-flow.html"><span class="header-section-number">5</span> Conditionals and Control Flow</a></li>
<li><a class="" href="loops.html"><span class="header-section-number">6</span> Loops</a></li>
<li><a class="" href="functions.html"><span class="header-section-number">7</span> Functions</a></li>
<li><a class="" href="the-apply-family.html"><span class="header-section-number">8</span> The apply family</a></li>
<li><a class="" href="utilities.html"><span class="header-section-number">9</span> Utilities</a></li>
<li><a class="" href="data-wrangling-1.html"><span class="header-section-number">10</span> Data wrangling</a></li>
<li><a class="" href="data-visualization-1.html"><span class="header-section-number">11</span> Data visualization</a></li>
<li><a class="active" href="grouping-and-summarizing-1.html"><span class="header-section-number">12</span> Grouping and summarizing</a></li>
<li><a class="" href="types-of-visualizations-1.html"><span class="header-section-number">13</span> Types of visualizations</a></li>
</ul>

        <div class="book-extra">
          <p><a id="book-repo" href="https://github.com/hadley/r4ds">View book source <i class="fab fa-github"></i></a></p>
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="grouping-and-summarizing-1" class="section level1" number="12">
<h1>
<span class="header-section-number">12</span> Grouping and summarizing<a class="anchor" aria-label="anchor" href="#grouping-and-summarizing-1"><i class="fas fa-link"></i></a>
</h1>
<p>
</p>
<p>So far you’ve been answering questions about individual country-year pairs, but you may be interested in aggregations of the data, such as the average life expectancy of all countries within each year.
Here you’ll learn to use the group by and summarize verbs, which collapse large datasets into manageable summaries.</p>

<div id="the-summarize-verb-1" class="section level2" number="12.1">
<h2>
<span class="header-section-number">12.1</span> The summarize verb<a class="anchor" aria-label="anchor" href="#the-summarize-verb-1"><i class="fas fa-link"></i></a>
</h2>
<div id="summarizing-the-median-life-expectancy-1" class="section level3" number="12.1.1">
<h3>
<span class="header-section-number">12.1.1</span> Summarizing the median life expectancy<a class="anchor" aria-label="anchor" href="#summarizing-the-median-life-expectancy-1"><i class="fas fa-link"></i></a>
</h3>
<div>
<p>
</p>
<p>You’ve seen how to find the mean life expectancy and the total population across a set of observations, but <code><a href="https://rdrr.io/r/base/mean.html">mean()</a></code> and <code><a href="https://rdrr.io/r/base/sum.html">sum()</a></code> are only two of the functions R provides for summarizing a collection of numbers.
Here, you’ll learn to use the <code><a href="https://rdrr.io/r/stats/median.html">median()</a></code> function in combination with <code><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarize()</a></code>.</p>

<p>
</p>
<p>By the way, <code>dplyr</code> displays some messages when it’s loaded that we’ve been hiding so far.
They’ll show up in red and start with:</p>

<pre><code>Attaching package: 'dplyr'

The following objects are masked from 'package:stats':
</code></pre>
<p>
</p>
<p>This will occur in future exercises each time you load <code>dplyr</code>: it’s mentioning some built-in functions that are overwritten by <code>dplyr</code>.
You won’t need to worry about this message within this course.</p>

</div>
<div class="exercise--instructions__content">
<ul>
<li>
<p>Use the <code><a href="https://rdrr.io/r/stats/median.html">median()</a></code> function within a <code><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarize()</a></code> to find the median life expectancy.
Save it into a column called <code>medianLifeExp</code>.</p>
</li>
</ul>
</div>
<div class="sourceCode" id="cb204"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/jennybc/gapminder">gapminder</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org">dplyr</a></span><span class="op">)</span>

<span class="co"># Summarize to find the median life expectancy</span>
<span class="va">gapminder</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarize</a></span><span class="op">(</span>medianLifeExp <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/median.html">median</a></span><span class="op">(</span><span class="va">lifeExp</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; <span style="color: #555555;"># A tibble: 1 × 1</span></span>
<span class="co">#&gt;   <span style="font-weight: bold;">medianLifeExp</span></span>
<span class="co">#&gt;           <span style="color: #555555; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="co">#&gt; <span style="color: #555555;">1</span>          60.7</span></code></pre></div>
<p class>
</p>
<p>That’s right!
Note that this is the median across all countries and all years in the dataset.</p>

</div>
<div id="summarizing-the-median-life-expectancy-in-1957-1" class="section level3" number="12.1.2">
<h3>
<span class="header-section-number">12.1.2</span> Summarizing the median life expectancy in 1957<a class="anchor" aria-label="anchor" href="#summarizing-the-median-life-expectancy-in-1957-1"><i class="fas fa-link"></i></a>
</h3>
<div>
<p>
</p>
<p>Rather than summarizing the entire dataset, you may want to find the median life expectancy for only one particular year.
In this case, you’ll find the median in the year 1957.</p>

</div>
<div class="exercise--instructions__content">
<ul>
<li>
<p>Filter for the year 1957, then use the <code><a href="https://rdrr.io/r/stats/median.html">median()</a></code> function within a <code><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarize()</a></code> to calculate the median life expectancy into a column called <code>medianLifeExp</code>.</p>
</li>
</ul>
</div>
<div class="sourceCode" id="cb205"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/jennybc/gapminder">gapminder</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org">dplyr</a></span><span class="op">)</span>

<span class="co"># Filter for 1957 then summarize the median life expectancy</span>
<span class="va">gapminder</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">year</span> <span class="op">==</span> <span class="fl">1957</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarize</a></span><span class="op">(</span>medianLifeExp <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/median.html">median</a></span><span class="op">(</span><span class="va">lifeExp</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; <span style="color: #555555;"># A tibble: 1 × 1</span></span>
<span class="co">#&gt;   <span style="font-weight: bold;">medianLifeExp</span></span>
<span class="co">#&gt;           <span style="color: #555555; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="co">#&gt; <span style="color: #555555;">1</span>          48.4</span></code></pre></div>
<p class>
</p>
<p>Great!
Just like in Chapter 1, this chapter will often involve performing multiple <code>dplyr</code> steps in a row.</p>

</div>
<div id="summarizing-multiple-variables-in-1957-1" class="section level3" number="12.1.3">
<h3>
<span class="header-section-number">12.1.3</span> Summarizing multiple variables in 1957<a class="anchor" aria-label="anchor" href="#summarizing-multiple-variables-in-1957-1"><i class="fas fa-link"></i></a>
</h3>
<div>
<p>
</p>
<p>The <code><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarize()</a></code> verb allows you to summarize multiple variables at once.
In this case, you’ll use the <code><a href="https://rdrr.io/r/stats/median.html">median()</a></code> function to find the median life expectancy and the <code><a href="https://rdrr.io/r/base/Extremes.html">max()</a></code> function to find the maximum GDP per capita.</p>

</div>
<div class="exercise--instructions__content">
<ul>
<li>
<p>Find both the median life expectancy (<code>lifeExp</code>) and the maximum GDP per capita (<code>gdpPercap</code>) in the year 1957, calling them <code>medianLifeExp</code> and <code>maxGdpPercap</code> respectively.
You can use the <code><a href="https://rdrr.io/r/base/Extremes.html">max()</a></code> function to find the maximum.</p>
</li>
</ul>
</div>
<div class="sourceCode" id="cb206"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/jennybc/gapminder">gapminder</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org">dplyr</a></span><span class="op">)</span>

<span class="co"># Filter for 1957 then summarize the median life expectancy and the maximum GDP per capita</span>
<span class="va">gapminder</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">year</span> <span class="op">==</span> <span class="fl">1957</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarize</a></span><span class="op">(</span>medianLifeExp <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/median.html">median</a></span><span class="op">(</span><span class="va">lifeExp</span><span class="op">)</span>,
            maxGdpPercap <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html">max</a></span><span class="op">(</span><span class="va">gdpPercap</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; <span style="color: #555555;"># A tibble: 1 × 2</span></span>
<span class="co">#&gt;   <span style="font-weight: bold;">medianLifeExp</span> <span style="font-weight: bold;">maxGdpPercap</span></span>
<span class="co">#&gt;           <span style="color: #555555; font-style: italic;">&lt;dbl&gt;</span>        <span style="color: #555555; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="co">#&gt; <span style="color: #555555;">1</span>          48.4      <span style="text-decoration: underline;">113</span>523.</span></code></pre></div>
<p class>
</p>
<p>That’s right!
Think about what other kinds of information about countries you might want to summarize within one year.</p>

</div>
</div>
<div id="the-group_by-verb-1" class="section level2" number="12.2">
<h2>
<span class="header-section-number">12.2</span> The group_by verb<a class="anchor" aria-label="anchor" href="#the-group_by-verb-1"><i class="fas fa-link"></i></a>
</h2>
<div id="summarizing-by-year-1" class="section level3" number="12.2.1">
<h3>
<span class="header-section-number">12.2.1</span> Summarizing by year<a class="anchor" aria-label="anchor" href="#summarizing-by-year-1"><i class="fas fa-link"></i></a>
</h3>
<div>
<p>
</p>
<p>In a previous exercise, you found the median life expectancy and the maximum GDP per capita in the year 1957.
Now, you’ll perform those two summaries within each year in the dataset, using the <code>group_by</code> verb.</p>

</div>
<div class="exercise--instructions__content">
<ul>
<li>
<p>Find the median life expectancy (<code>lifeExp</code>) and maximum GDP per capita (<code>gdpPercap</code>) <strong>within each year</strong>, saving them into <code>medianLifeExp</code> and <code>maxGdpPercap</code>, respectively.</p>
</li>
</ul>
</div>
<div class="sourceCode" id="cb207"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/jennybc/gapminder">gapminder</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org">dplyr</a></span><span class="op">)</span>

<span class="co"># Find median life expectancy and maximum GDP per capita in each year</span>
<span class="va">gapminder</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">year</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarize</a></span><span class="op">(</span>medianLifeExp <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/median.html">median</a></span><span class="op">(</span><span class="va">lifeExp</span><span class="op">)</span>,
            maxGdpPercap <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html">max</a></span><span class="op">(</span><span class="va">gdpPercap</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; <span style="color: #555555;"># A tibble: 12 × 3</span></span>
<span class="co">#&gt;    <span style="font-weight: bold;">year</span> <span style="font-weight: bold;">medianLifeExp</span> <span style="font-weight: bold;">maxGdpPercap</span></span>
<span class="co">#&gt;   <span style="color: #555555; font-style: italic;">&lt;int&gt;</span>         <span style="color: #555555; font-style: italic;">&lt;dbl&gt;</span>        <span style="color: #555555; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="co">#&gt; <span style="color: #555555;">1</span>  <span style="text-decoration: underline;">1</span>952          45.1      <span style="text-decoration: underline;">108</span>382.</span>
<span class="co">#&gt; <span style="color: #555555;">2</span>  <span style="text-decoration: underline;">1</span>957          48.4      <span style="text-decoration: underline;">113</span>523.</span>
<span class="co">#&gt; <span style="color: #555555;">3</span>  <span style="text-decoration: underline;">1</span>962          50.9       <span style="text-decoration: underline;">95</span>458.</span>
<span class="co">#&gt; <span style="color: #555555;">4</span>  <span style="text-decoration: underline;">1</span>967          53.8       <span style="text-decoration: underline;">80</span>895.</span>
<span class="co">#&gt; <span style="color: #555555;">5</span>  <span style="text-decoration: underline;">1</span>972          56.5      <span style="text-decoration: underline;">109</span>348.</span>
<span class="co">#&gt; <span style="color: #555555;">6</span>  <span style="text-decoration: underline;">1</span>977          59.7       <span style="text-decoration: underline;">59</span>265.</span>
<span class="co">#&gt; <span style="color: #555555;"># … with 6 more rows</span></span></code></pre></div>
<p class>
</p>
<p>Great!
Interesting: notice that median life expectancy across countries is generally going up over time, but maximum GDP per capita is not.</p>

</div>
<div id="summarizing-by-continent-1" class="section level3" number="12.2.2">
<h3>
<span class="header-section-number">12.2.2</span> Summarizing by continent<a class="anchor" aria-label="anchor" href="#summarizing-by-continent-1"><i class="fas fa-link"></i></a>
</h3>
<div>
<p>
</p>
<p>You can group by any variable in your dataset to create a summary.
Rather than comparing across time, you might be interested in comparing among continents.
You’ll want to do that within one year of the dataset: let’s use 1957.</p>

</div>
<div class="exercise--instructions__content">
<ul>
<li>
<p>Filter the <code>gapminder</code> data for the year 1957.
Then find the median life expectancy (<code>lifeExp</code>) and maximum GDP per capita (<code>gdpPercap</code>) <strong>within each continent</strong>, saving them into <code>medianLifeExp</code> and <code>maxGdpPercap</code>, respectively.</p>
</li>
</ul>
</div>
<div class="sourceCode" id="cb208"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/jennybc/gapminder">gapminder</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org">dplyr</a></span><span class="op">)</span>

<span class="co"># Find median life expectancy and maximum GDP per capita in each continent in 1957</span>
<span class="va">gapminder</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">year</span> <span class="op">==</span> <span class="fl">1957</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">continent</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarize</a></span><span class="op">(</span>medianLifeExp <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/median.html">median</a></span><span class="op">(</span><span class="va">lifeExp</span><span class="op">)</span>,
            maxGdpPercap <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html">max</a></span><span class="op">(</span><span class="va">gdpPercap</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; <span style="color: #555555;"># A tibble: 5 × 3</span></span>
<span class="co">#&gt;   <span style="font-weight: bold;">continent</span> <span style="font-weight: bold;">medianLifeExp</span> <span style="font-weight: bold;">maxGdpPercap</span></span>
<span class="co">#&gt;   <span style="color: #555555; font-style: italic;">&lt;fct&gt;</span>             <span style="color: #555555; font-style: italic;">&lt;dbl&gt;</span>        <span style="color: #555555; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="co">#&gt; <span style="color: #555555;">1</span> Africa             40.6        <span style="text-decoration: underline;">5</span>487.</span>
<span class="co">#&gt; <span style="color: #555555;">2</span> Americas           56.1       <span style="text-decoration: underline;">14</span>847.</span>
<span class="co">#&gt; <span style="color: #555555;">3</span> Asia               48.3      <span style="text-decoration: underline;">113</span>523.</span>
<span class="co">#&gt; <span style="color: #555555;">4</span> Europe             67.6       <span style="text-decoration: underline;">17</span>909.</span>
<span class="co">#&gt; <span style="color: #555555;">5</span> Oceania            70.3       <span style="text-decoration: underline;">12</span>247.</span></code></pre></div>
<p class>
</p>
<p>Great work!
Which continent had the highest median life expectancy in 1957?</p>

</div>
<div id="summarizing-by-continent-and-year-1" class="section level3" number="12.2.3">
<h3>
<span class="header-section-number">12.2.3</span> Summarizing by continent and year<a class="anchor" aria-label="anchor" href="#summarizing-by-continent-and-year-1"><i class="fas fa-link"></i></a>
</h3>
<div>
<p>
</p>
<p>Instead of grouping just by year, or just by continent, you’ll now group by both continent and year to summarize within each.</p>

</div>
<div class="exercise--instructions__content">
<ul>
<li>
<p>Find the median life expectancy (<code>lifeExp</code>) and maximum GDP per capita (<code>gdpPercap</code>) <strong>within each combination of continent and year</strong>, saving them into <code>medianLifeExp</code> and <code>maxGdpPercap</code>, respectively.</p>
</li>
</ul>
</div>
<div class="sourceCode" id="cb209"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/jennybc/gapminder">gapminder</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org">dplyr</a></span><span class="op">)</span>

<span class="co"># Find median life expectancy and maximum GDP per capita in each continent/year combination</span>
<span class="va">gapminder</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">continent</span>, <span class="va">year</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarize</a></span><span class="op">(</span>medianLifeExp <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/median.html">median</a></span><span class="op">(</span><span class="va">lifeExp</span><span class="op">)</span>,
            maxGdpPercap <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html">max</a></span><span class="op">(</span><span class="va">gdpPercap</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; `summarise()` has grouped output by 'continent'. You can override using the</span>
<span class="co">#&gt; `.groups` argument.</span>
<span class="co">#&gt; <span style="color: #555555;"># A tibble: 60 × 4</span></span>
<span class="co">#&gt; <span style="color: #555555;"># Groups:   continent [5]</span></span>
<span class="co">#&gt;   <span style="font-weight: bold;">continent</span>  <span style="font-weight: bold;">year</span> <span style="font-weight: bold;">medianLifeExp</span> <span style="font-weight: bold;">maxGdpPercap</span></span>
<span class="co">#&gt;   <span style="color: #555555; font-style: italic;">&lt;fct&gt;</span>     <span style="color: #555555; font-style: italic;">&lt;int&gt;</span>         <span style="color: #555555; font-style: italic;">&lt;dbl&gt;</span>        <span style="color: #555555; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="co">#&gt; <span style="color: #555555;">1</span> Africa     <span style="text-decoration: underline;">1</span>952          38.8        <span style="text-decoration: underline;">4</span>725.</span>
<span class="co">#&gt; <span style="color: #555555;">2</span> Africa     <span style="text-decoration: underline;">1</span>957          40.6        <span style="text-decoration: underline;">5</span>487.</span>
<span class="co">#&gt; <span style="color: #555555;">3</span> Africa     <span style="text-decoration: underline;">1</span>962          42.6        <span style="text-decoration: underline;">6</span>757.</span>
<span class="co">#&gt; <span style="color: #555555;">4</span> Africa     <span style="text-decoration: underline;">1</span>967          44.7       <span style="text-decoration: underline;">18</span>773.</span>
<span class="co">#&gt; <span style="color: #555555;">5</span> Africa     <span style="text-decoration: underline;">1</span>972          47.0       <span style="text-decoration: underline;">21</span>011.</span>
<span class="co">#&gt; <span style="color: #555555;">6</span> Africa     <span style="text-decoration: underline;">1</span>977          49.3       <span style="text-decoration: underline;">21</span>951.</span>
<span class="co">#&gt; <span style="color: #555555;"># … with 54 more rows</span></span></code></pre></div>
<p class>
</p>
<p>Excellent!
In the next chapter, you’ll learn to turn this data into an informative graph.</p>

</div>
</div>
<div id="visualizing-summarized-data-1" class="section level2" number="12.3">
<h2>
<span class="header-section-number">12.3</span> Visualizing summarized data<a class="anchor" aria-label="anchor" href="#visualizing-summarized-data-1"><i class="fas fa-link"></i></a>
</h2>
<div id="visualizing-median-life-expectancy-over-time-1" class="section level3" number="12.3.1">
<h3>
<span class="header-section-number">12.3.1</span> Visualizing median life expectancy over time<a class="anchor" aria-label="anchor" href="#visualizing-median-life-expectancy-over-time-1"><i class="fas fa-link"></i></a>
</h3>
<div>
<p>
</p>
<p>In the last chapter, you summarized the gapminder data to calculate the median life expectancy within each year.
This code is provided for you, and is saved (with <code>&lt;-</code>) as the <code>by_year</code> dataset.</p>

<p>
</p>
<p>Now you can use the ggplot2 package to turn this into a visualization of changing life expectancy over time.</p>

</div>
<div class="exercise--instructions__content">
<ul>
<li>
<p>Use the <code>by_year</code> dataset to create a scatter plot showing the change of median life expectancy over time, with <code>year</code> on the x-axis and <code>medianLifeExp</code> on the y-axis.
Be sure to add <code>expand_limits(y = 0)</code> to make sure the plot’s y-axis includes zero.</p>
</li>
</ul>
</div>
<div class="sourceCode" id="cb210"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/jennybc/gapminder">gapminder</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org">dplyr</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org">ggplot2</a></span><span class="op">)</span>

<span class="va">by_year</span> <span class="op">&lt;-</span> <span class="va">gapminder</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">year</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarize</a></span><span class="op">(</span>medianLifeExp <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/median.html">median</a></span><span class="op">(</span><span class="va">lifeExp</span><span class="op">)</span>,
            maxGdpPercap <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html">max</a></span><span class="op">(</span><span class="va">gdpPercap</span><span class="op">)</span><span class="op">)</span>

<span class="co"># Create a scatter plot showing the change in medianLifeExp over time</span>
<span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">by_year</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">year</span>, y <span class="op">=</span> <span class="va">medianLifeExp</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/expand_limits.html">expand_limits</a></span><span class="op">(</span>y <span class="op">=</span> <span class="fl">0</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="introtidyverse_files/figure-html/unnamed-chunk-27-1.png" width="672"></div>
<p class>
</p>
<p>Great!
It looks like median life expectancy across countries is increasing over time.</p>

</div>
<div id="visualizing-median-gdp-per-capita-per-continent-over-time-1" class="section level3" number="12.3.2">
<h3>
<span class="header-section-number">12.3.2</span> Visualizing median GDP per capita per continent over time<a class="anchor" aria-label="anchor" href="#visualizing-median-gdp-per-capita-per-continent-over-time-1"><i class="fas fa-link"></i></a>
</h3>
<div>
<p>
</p>
<p>In the last exercise you were able to see how the median life expectancy of countries changed over time.
Now you’ll examine the median GDP per capita instead, and see how the trend differs among continents.</p>

</div>
<div class="exercise--instructions__content">
<li>
<p>Summarize the gapminder dataset by continent and year, finding the median GDP per capita (<code>gdpPercap</code>) within each and putting it into a column called <code>medianGdpPercap</code>.
Use the assignment operator <code>&lt;-</code> to save this summarized data as <code>by_year_continent</code>.</p>
</li>
<div class="sourceCode" id="cb211"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/jennybc/gapminder">gapminder</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org">dplyr</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org">ggplot2</a></span><span class="op">)</span>

<span class="co"># Summarize medianGdpPercap within each continent within each year: by_year_continent</span>
<span class="va">by_year_continent</span> <span class="op">&lt;-</span> <span class="va">gapminder</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">continent</span>, <span class="va">year</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarize</a></span><span class="op">(</span>medianGdpPercap <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/median.html">median</a></span><span class="op">(</span><span class="va">gdpPercap</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; `summarise()` has grouped output by 'continent'. You can override using the</span>
<span class="co">#&gt; `.groups` argument.</span></code></pre></div>
<li>
<p>Create a scatter plot showing the change in <code>medianGdpPercap</code> by continent over time.
Use color to distinguish between continents, and be sure to add <code>expand_limits(y = 0)</code> so that the y-axis starts at zero.</p>
</li>
<div class="sourceCode" id="cb212"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Plot the change in medianGdpPercap in each continent over time</span>
<span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">by_year_continent</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">year</span>, y <span class="op">=</span> <span class="va">medianGdpPercap</span>, color <span class="op">=</span> <span class="va">continent</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/expand_limits.html">expand_limits</a></span><span class="op">(</span>y <span class="op">=</span> <span class="fl">0</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="introtidyverse_files/figure-html/unnamed-chunk-29-1.png" width="672"></div>
</div>
<p class>
</p>
<p>Great!
You might be wondering how you can connect these points with lines.
You’ll learn that in Chapter 4!</p>

</div>
<div id="comparing-median-life-expectancy-and-median-gdp-per-continent-in-2007-1" class="section level3" number="12.3.3">
<h3>
<span class="header-section-number">12.3.3</span> Comparing median life expectancy and median GDP per continent in 2007<a class="anchor" aria-label="anchor" href="#comparing-median-life-expectancy-and-median-gdp-per-continent-in-2007-1"><i class="fas fa-link"></i></a>
</h3>
<div>
<p>
</p>
<p>In these exercises you’ve generally created plots that show change over time.
But as another way of exploring your data visually, you can also use ggplot2 to plot summarized data to compare continents within a single year.</p>

</div>
<div class="exercise--instructions__content">
<li>
<p>Filter the gapminder dataset for the year 2007, then summarize the median GDP per capita and the median life expectancy <strong>within each continent</strong>, into columns called <code>medianLifeExp</code> and <code>medianGdpPercap</code>.
Save this as <code>by_continent_2007</code>.</p>
</li>
<div class="sourceCode" id="cb213"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/jennybc/gapminder">gapminder</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org">dplyr</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org">ggplot2</a></span><span class="op">)</span>

<span class="co"># Summarize the median GDP and median life expectancy per continent in 2007</span>
<span class="va">by_continent_2007</span> <span class="op">&lt;-</span> <span class="va">gapminder</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">year</span> <span class="op">==</span> <span class="fl">2007</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">continent</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarize</a></span><span class="op">(</span>medianGdpPercap <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/median.html">median</a></span><span class="op">(</span><span class="va">gdpPercap</span><span class="op">)</span>,
            medianLifeExp <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/median.html">median</a></span><span class="op">(</span><span class="va">lifeExp</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<li>
<p>Use the <code>by_continent_2007</code> data to create a scatterplot comparing these summary statistics for continents in 2007, putting the median GDP per capita on the x-axis to the median life expectancy on the y-axis.
Color the scatter plot by <code>continent</code>.
You don’t need to add <code>expand_limits(y = 0)</code> for this plot.</p>
</li>
<div class="sourceCode" id="cb214"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Use a scatter plot to compare the median GDP and median life expectancy</span>
<span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">by_continent_2007</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">medianGdpPercap</span>, y <span class="op">=</span> <span class="va">medianLifeExp</span>, color <span class="op">=</span> <span class="va">continent</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="introtidyverse_files/figure-html/unnamed-chunk-31-1.png" width="672"></div>
</div>
<p class>
</p>
<p>Great work!
Scatter plots are a very flexible tool for examining relationships.</p>

</div>
</div>
</div>
  <div class="chapter-nav">
<div class="prev"><a href="data-visualization-1.html"><span class="header-section-number">11</span> Data visualization</a></div>
<div class="next"><a href="types-of-visualizations-1.html"><span class="header-section-number">13</span> Types of visualizations</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#grouping-and-summarizing-1"><span class="header-section-number">12</span> Grouping and summarizing</a></li>
<li>
<a class="nav-link" href="#the-summarize-verb-1"><span class="header-section-number">12.1</span> The summarize verb</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#summarizing-the-median-life-expectancy-1"><span class="header-section-number">12.1.1</span> Summarizing the median life expectancy</a></li>
<li><a class="nav-link" href="#summarizing-the-median-life-expectancy-in-1957-1"><span class="header-section-number">12.1.2</span> Summarizing the median life expectancy in 1957</a></li>
<li><a class="nav-link" href="#summarizing-multiple-variables-in-1957-1"><span class="header-section-number">12.1.3</span> Summarizing multiple variables in 1957</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#the-group_by-verb-1"><span class="header-section-number">12.2</span> The group_by verb</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#summarizing-by-year-1"><span class="header-section-number">12.2.1</span> Summarizing by year</a></li>
<li><a class="nav-link" href="#summarizing-by-continent-1"><span class="header-section-number">12.2.2</span> Summarizing by continent</a></li>
<li><a class="nav-link" href="#summarizing-by-continent-and-year-1"><span class="header-section-number">12.2.3</span> Summarizing by continent and year</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#visualizing-summarized-data-1"><span class="header-section-number">12.3</span> Visualizing summarized data</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#visualizing-median-life-expectancy-over-time-1"><span class="header-section-number">12.3.1</span> Visualizing median life expectancy over time</a></li>
<li><a class="nav-link" href="#visualizing-median-gdp-per-capita-per-continent-over-time-1"><span class="header-section-number">12.3.2</span> Visualizing median GDP per capita per continent over time</a></li>
<li><a class="nav-link" href="#comparing-median-life-expectancy-and-median-gdp-per-continent-in-2007-1"><span class="header-section-number">12.3.3</span> Comparing median life expectancy and median GDP per continent in 2007</a></li>
</ul>
</li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
<li><a id="book-source" href="https://github.com/hadley/r4ds/blob/master/introtidyverse.Rmd">View source <i class="fab fa-github"></i></a></li>
          <li><a id="book-edit" href="https://github.com/hadley/r4ds/edit/master/introtidyverse.Rmd">Edit this page <i class="fab fa-github"></i></a></li>
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>Introduction to DataCamp</strong>" was written by Tran Thanh Dat. </p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script><script type="text/x-mathjax-config">const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
for (let popover of popovers) {
  const div = document.createElement('div');
  div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
  div.innerHTML = popover.getAttribute('data-content');

  var has_math = div.querySelector("span.math");
  if (has_math) {
    document.body.appendChild(div);
    MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
    MathJax.Hub.Queue(function() {
      popover.setAttribute('data-content', div.innerHTML);
      document.body.removeChild(div);
    })
  }
}
</script>
</body>
</html>
